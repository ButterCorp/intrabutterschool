<div *ngIf="student && student.active">

  <div class="ui container" style="margin-top: 50px;">
    <div class="ui secondary pointing tabular menu">
      <a class="item {{(publications)?'active':''}}" (click)="docs = 0; publications = 1; like=0">
        Publications
      </a>
      <a class="item {{(docs)?'active':''}}" (click)="docs = 1; publications = 0; like=0">
        Bibliothèque
      </a>
      <a class="item {{(like)?'active':''}}" (click)="docs = 0; publications = 0; like=1">
        Like
      </a>
      <!--<a class="item">
                Friends
              </a>-->
    </div>
    <div class="twelve wide stretched column">
      <div class="ui segment grid">
        <div class="four wide column">
          <img class="ui small circular image" src="{{student.avatar}}">
        </div>
        <div class="four wide column">
          <h1>{{student.name}}</h1>
          <h4>{{student.bio}}</h4>
        </div>
        <div class="four wide column">
          <p></p>
        </div>
        <div class="four wide column">
          <a class="ui blue right ribbon label">{{student.rank}}</a>
          <p></p>
        </div>
      </div>
    </div>

    <div class="ui bottom attached segment" *ngIf="publications">

      <div class="ui form" *ngIf="student.id == 1">
        <!-- a remplacer par auth.id() -->
        <div class="field">
          <label>Publier un message {{postToUpdate?.content}}</label>
          <textarea rows="3" #postContent></textarea>
        </div>
        <div class="ui submit button primary" (click)="add(postContent.value); postContent.value=''">Envoyer</div>
      </div>

      <h3 *ngIf="posts !== undefined && posts.length == 0" style="padding: 15px;">
        {{student.name}} n'a encore rien publié sur son espace
        <i class="meh outline icon" style="font-size: 20px;"></i>
      </h3>

      <div class="ui feed">
        <div class="event" *ngFor="let post of posts">
          <div class="label">
            <img src="{{student.avatar}}">
          </div>
          <div class="content">
            <div class="summary">
              <a class="user">
                {{student.name}}
              </a> {{post.type}}
              <div class="date">
                1 Hour Ago
              </div>
              <div class="actions-buttons" *ngIf="post.id_student == 1">
                <!-- replace by auth.id -->
                <i class="pencil alternate icon" title="Editer le post" (click)="postToUpdate = post" sm-modal-small></i>
                <i class="times icon" title="Supprimer le post" (click)="postToDelete = post" sm-modal-basic></i>
              </div>
            </div>
            <div class="extra text">
              {{post.content}}
            </div>
            <div class="meta">
              <a class="like" (click)="updateLike(post.id)">
                <i class="like icon"></i> {{showNumberOfLike(post.id)}} Likes
              </a>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="ui bottom attached segment" *ngIf="docs">
      <h3 style="padding: 15px;">
        {{student.name}} à partagé {{documents.length}} documents
      </h3>
      <div class="ui four cards">
        <div class="ui card" *ngFor="let document of documents">
          <div class="content">
            <div class="right floated meta">0h</div>
            <img class="ui avatar image" src="{{student.avatar}}"> {{student.name}}
          </div>
          <div class="image">
            <img class="ui wireframe image" src="https://semantic-ui.com/images/wireframe/image.png">
          </div>
          <div class="content">
            <span class="right floated">
              <i class="heart outline like icon"></i>
              0 likes
            </span>
            {{document.name}}{{document.ext}}
          </div>
        </div>
      </div>
    </div>

    <div class="ui bottom attached segment" *ngIf="like">
      <table class="ui selectable celled table">
        <thead>
          <tr>
            <th>ID</th>
            <th>ID posts</th>
            <th>ID Students</th>
          </tr>
        </thead>
        <tbody *ngFor="let like of likes">
          <tr *ngIf="like.id_student == student.id">
            <td>{{like.id}}</td>
            <td>{{showPostFromId(like.id_post)}}</td>
            <td>{{student.name}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Modal (launch with sm-modal directive. see semantic-modale.directive for more infos) -->
    <div class="ui basic modal">
      <div class="ui icon header">
        <i class="trash icon"></i>
        Suppression d'une publication
      </div>
      <div class="content">
        <p>Vous êtes sur le point de supprimer une publication, voulez-vous continuer?</p>
      </div>
      <div class="actions">
        <div class="ui red basic cancel inverted button">
          <i class="remove icon"></i>
          Annuler
        </div>
        <div class="ui green ok inverted button" (click)="delete(postToDelete)">
          <i class="checkmark icon"></i>
          Oui, supprimer cette publication
        </div>
      </div>
    </div>

    <div class="ui small modal">
      <i class="close icon"></i>
      <div class="header">
        Modifier la publication
      </div>
      <div class="image content">
        <div class="image">
          <img class="ui avatar image" src="{{student.avatar}}">
        </div>
        <div class="description ui form">
          <div class="field">
            <textarea cols="80" rows="1" #postContent>{{postToUpdate?.content}}</textarea>
          </div>  
        </div>
      </div>
      <div class="actions">
        <div class="ui button">Annuler</div>
        <div class="ui button positive" (click)="update(postToUpdate, postContent.value) ; postToUpdate = null">Mettre à jour</div>
      </div>
    </div>

  </div>